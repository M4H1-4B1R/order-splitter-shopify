import{r as k}from"./chunk-NISHYRIK-C6H48Nd1.js";import{t as A,s as M,a as D,b as H,d as Y}from"./use-is-after-initial-mount-BFIEK1BH.js";const q=k.createContext(null),$=k.createContext(null);function J(s){return A[s]}function K(){const s=k.useContext(q);if(!s)throw new Error("No theme was provided. Your application must be wrapped in an <AppProvider> or <ThemeProvider> component. See https://polaris.shopify.com/components/app-provider for implementation instructions.");return s}function Q(){const s=k.useContext($);if(!s)throw new Error("No themeName was provided. Your application must be wrapped in an <AppProvider> or <ThemeProvider> component. See https://polaris.shopify.com/components/app-provider for implementation instructions.");return s}function L(s,t,e){let n,o,c,a,r,u,d=0,I=!1,h=!1,y=!0;const w=!t&&t!==0;if(typeof s!="function")throw new TypeError("Expected a function");const f=t||0;typeof e=="object"&&(I=!!e.leading,h="maxWait"in e,c=h?Math.max(Number(e.maxWait)||0,f):void 0,y="trailing"in e?!!e.trailing:y);function m(i){const l=n,p=o;return n=void 0,o=void 0,d=i,a=s.apply(p,l),a}function g(i,l){return w?(cancelAnimationFrame(r),requestAnimationFrame(i)):setTimeout(i,l)}function N(i){if(w)return cancelAnimationFrame(i);clearTimeout(i)}function E(i){return d=i,r=g(S,f),I?m(i):a}function O(i){const l=i-u,p=i-d,b=f-l;return h&&c?Math.min(b,c-p):b}function R(i){const l=i-u,p=i-d;return u===void 0||l>=f||l<0||h&&c&&p>=c}function S(){const i=Date.now();if(R(i))return B(i);r=g(S,O(i))}function B(i){return r=void 0,y&&n?m(i):(n=o=void 0,a)}function F(){r!==void 0&&N(r),d=0,n=u=o=r=void 0}function W(){return r===void 0?a:B(Date.now())}function z(){return r!==void 0}function x(...i){const l=Date.now(),p=R(l);if(n=i,o=this,u=l,p){if(r===void 0)return E(u);if(h)return r=g(S,f),m(u)}return r===void 0&&(r=g(S,f)),a}return x.cancel=F,x.flush=W,x.pending=z,x}class T{static get zero(){return new T}constructor({top:t=0,left:e=0,width:n=0,height:o=0}={}){this.top=t,this.left=e,this.width=n,this.height=o}get center(){return{x:this.left+this.width/2,y:this.top+this.height/2}}}function v(s){try{const t=s.getBoundingClientRect();return new T({top:t.top,left:t.left,width:t.width,height:t.height})}catch{return new T({width:window.innerWidth,height:window.innerHeight})}}const C=1e3/60;class U{constructor(t){this.stickyItems=[],this.stuckItems=[],this.container=null,this.topBarOffset=0,this.handleResize=L(()=>{this.manageStickyItems()},C,{leading:!0,trailing:!0,maxWait:C}),this.handleScroll=L(()=>{this.manageStickyItems()},C,{leading:!0,trailing:!0,maxWait:C}),t&&this.setContainer(t)}registerStickyItem(t){this.stickyItems.push(t)}unregisterStickyItem(t){const e=this.stickyItems.findIndex(({stickyNode:n})=>t===n);this.stickyItems.splice(e,1)}getStickyItem(t){return this.stickyItems.find(({stickyNode:e})=>t===e)}setContainer(t){this.container=t,P(t)&&this.setTopBarOffset(t),this.container.addEventListener("scroll",this.handleScroll),window.addEventListener("resize",this.handleResize),this.manageStickyItems()}removeScrollListener(){this.container&&(this.container.removeEventListener("scroll",this.handleScroll),window.removeEventListener("resize",this.handleResize))}manageStickyItems(){if(this.stickyItems.length<=0)return;const t=this.container?j(this.container):0,e=v(this.container).top+this.topBarOffset;this.stickyItems.forEach(n=>{const{handlePositioning:o}=n,{sticky:c,top:a,left:r,width:u}=this.evaluateStickyItem(n,t,e);this.updateStuckItems(n,c),o(c,a,r,u)})}evaluateStickyItem(t,e,n){var g;const{stickyNode:o,placeHolderNode:c,boundingElement:a,offset:r,disableWhenStacked:u}=t;if(u&&M().matches)return{sticky:!1,top:0,left:0,width:"auto"};const d=r?this.getOffset(o)+parseInt(D.space["space-500"],10):this.getOffset(o),I=e+d,h=c.getBoundingClientRect().top-n+e,y=n+d,w=c.getBoundingClientRect().width,f=c.getBoundingClientRect().left;let m;if(a==null)m=I>=h;else{const N=o.getBoundingClientRect().height||((g=o.firstElementChild)==null?void 0:g.getBoundingClientRect().height)||0,E=a.getBoundingClientRect().bottom-N+e-n;m=I>=h&&I<E}return{sticky:m,top:y,left:f,width:w}}updateStuckItems(t,e){const{stickyNode:n}=t;e&&!this.isNodeStuck(n)?this.addStuckItem(t):!e&&this.isNodeStuck(n)&&this.removeStuckItem(t)}addStuckItem(t){this.stuckItems.push(t)}removeStuckItem(t){const{stickyNode:e}=t,n=this.stuckItems.findIndex(({stickyNode:o})=>e===o);this.stuckItems.splice(n,1)}getOffset(t){if(this.stuckItems.length===0)return 0;let e=0,n=0;const o=this.stuckItems.length,c=v(t);for(;n<o;){const a=this.stuckItems[n].stickyNode;if(a!==t){const r=v(a);X(c,r)||(e+=v(a).height)}else break;n++}return e}isNodeStuck(t){return this.stuckItems.findIndex(({stickyNode:n})=>t===n)>=0}setTopBarOffset(t){const e=t.querySelector(`:not(${H.selector}) ${Y.selector}`);this.topBarOffset=e?e.clientHeight:0}}function P(s){return s===document}function j(s){return P(s)?document.body.scrollTop||document.documentElement.scrollTop:s.scrollTop}function X(s,t){const e=s.left,n=s.left+s.width,o=t.left;return t.left+t.width<e||n<o}const V=k.createContext(void 0),Z=k.createContext(void 0),tt=k.createContext(void 0);export{tt as E,Z as P,T as R,U as S,$ as T,q as a,V as b,Q as c,L as d,v as e,J as g,K as u};
